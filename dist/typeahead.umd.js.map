{"version":3,"file":"typeahead.umd.js","sources":["../node_modules/bind-decorator/index.js","../src/accessor.ts","../node_modules/classnames/index.js","../src/typeahead/option.tsx","../src/typeahead/selector.tsx","../src/keyevent.ts","../node_modules/fuzzy/lib/fuzzy.js","../src/typeahead/index.tsx","../src/tokenizer/token.tsx","../src/tokenizer/index.tsx"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar constants;\n(function (constants) {\n    constants.typeOfFunction = 'function';\n    constants.boolTrue = true;\n})(constants || (constants = {}));\nfunction bind(target, propertyKey, descriptor) {\n    if (!descriptor || (typeof descriptor.value !== constants.typeOfFunction)) {\n        throw new TypeError(\"Only methods can be decorated with @bind. <\" + propertyKey + \"> is not a method!\");\n    }\n    return {\n        configurable: constants.boolTrue,\n        get: function () {\n            var bound = descriptor.value.bind(this);\n            // Credits to https://github.com/andreypopp/autobind-decorator for memoizing the result of bind against a symbol on the instance.\n            Object.defineProperty(this, propertyKey, {\n                value: bound,\n                configurable: constants.boolTrue,\n                writable: constants.boolTrue\n            });\n            return bound;\n        }\n    };\n}\nexports.bind = bind;\nexports.default = bind;\n","import { OptionToStrFn, Option } from './types';\n\nexport default class Accessor {\n  // tslint:disable-next-line\n  static IDENTITY_FN<T>(input: T): T { return input; }\n\n  static generateAccessor(field: string) {\n    return (object: { [propName: string]: string }) => object[field];\n  }\n\n  static generateOptionToStringFor<T>(prop?: string | Function): OptionToStrFn<T> {\n    if (typeof prop === 'string') {\n      // @ts-ignore\n      return Accessor.generateAccessor(prop);\n    } \n    \n    if (typeof prop === 'function') {\n      return (prop as any);\n    }\n    \n    return function (input: any) { return (input as string); };\n  }\n\n  static valueForOption<T extends Option>(\n    object: T,\n    selector?: string | OptionToStrFn<T> | undefined, \n  ): string | void {\n    if (typeof selector === 'string') {\n      if (typeof object !== 'object') throw new Error(`Invalid object type ${typeof object}`);\n      // @ts-ignore\n      return object[selector];\n    } \n    \n    if (typeof selector === 'function') {\n      return selector(object);\n    }\n\n    if (typeof object === 'string') {\n      return object;\n    }\n    \n    throw new Error(`Invalid object type ${typeof object}`);\n  }\n}\n","/*!\n  Copyright (c) 2016 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(null, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import * as React from 'react';\nimport classNames from 'classnames';\n\nexport interface CustomClasses {\n  listItem?: string;\n  hover?: string;\n  customAdd?: string;\n  listAnchor?: string;\n}\n\nexport interface Props {\n  customClasses?: CustomClasses;\n  customValue?: string;\n  onClick: Function;\n  children: React.ReactNode;\n  hover?: boolean;\n}\n\n/**\n * A single option within the TypeaheadSelector\n */\nclass TypeaheadOption extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  private getProps() {\n    const customClasses: CustomClasses = { hover: 'hover' };\n    return {\n      ...{\n        customClasses,\n        onClick: (event: React.MouseEvent<HTMLDivElement>) => {\n          event.preventDefault();\n        },\n        hover: false,\n      },\n      ...this.props,\n    };\n  }\n\n  render() {\n    const { \n      customClasses, hover,\n      children, customValue,\n     } = this.getProps();\n\n    const classes: any = { };\n    const { listItem, hover: hoverClass = 'hover', customAdd } = customClasses;\n    classes[hoverClass] = Boolean(hover);\n    if (listItem) {\n      classes[listItem] = Boolean(listItem);\n    }\n\n    if (customValue && customAdd) {\n      classes[customAdd] = Boolean(customAdd);\n    }\n\n    const classList = classNames(classes);\n\n    // For some reason onClick is not fired when clicked on an option\n    // onMouseDown is used here as a workaround of #205 and other\n    // related tickets\n    return (\n      <li className={classList} onClick={this.onClick} onMouseDown={this.onClick}>\n        <a \n          href=\"javascript: void 0;\" \n          className={this.getClasses()} \n        >\n          {children}\n        </a>\n      </li>\n    );\n  }\n\n  getClasses() {\n    const { customClasses } = this.getProps();\n    const classes: any = {\n      'typeahead-option': true,\n    };\n    const { listAnchor } = customClasses;\n    if (listAnchor) {\n      classes[listAnchor] = true;\n    }\n\n    return classNames(classes);\n  }\n\n  onClick(event: React.MouseEvent<HTMLLIElement>) {\n    event.preventDefault();\n    return this.props.onClick(event);\n  }\n}\n\nexport default TypeaheadOption;\n","import * as React from 'react';\nimport classNames from 'classnames';\nimport TypeaheadOption from './option';\nimport { CustomClasses, OptionSelector, Option } from '../types';\n\nexport interface Props<Opt extends Option> {\n  options: Opt[];\n  allowCustomValues?: number;\n  customClasses?: CustomClasses;\n  customValue?: string;\n  selectionIndex?: number;\n  onOptionSelected?: OptionSelector;\n  displayOption: Function;\n  defaultClassNames?: boolean;\n  areResultsTruncated?: boolean;\n  resultsTruncatedMessage?: string;\n  innerRef?: ((c: HTMLElement) => void);\n}\n\n/**\n * Container for the options rendered as part of the autocompletion process\n * of the typeahead\n */\nclass TypeaheadSelector<T> extends React.Component<Props<T>> {\n  // Hack to handle the buggy typescript defaultProps\n  private getProps() {\n    const customClasses: CustomClasses = {};\n    return {\n      ...{\n        customClasses,\n        allowCustomValues: 0,\n        onOptionSelected: () => {},\n        defaultClassNames: true,\n      },\n      ...this.props,\n    };\n  }\n\n  render() {\n    const { \n      options, customClasses, customValue, displayOption,\n      defaultClassNames, allowCustomValues, selectionIndex,\n      areResultsTruncated, resultsTruncatedMessage,\n    } = this.getProps();\n    // Don't render if there are no options to display\n    if (!options.length && allowCustomValues <= 0) {\n      return false;\n    }\n\n    const classes: any = {\n      'typeahead-selector': defaultClassNames,\n    };\n    const { results: resClass } = customClasses;\n    if (resClass) {\n      classes[resClass] = true;\n    }\n    const classList = classNames(classes);\n\n    // CustomValue should be added to top of results list with different class name\n    let customValueComponent;\n    let customValueOffset = 0;\n    if (customValue) {\n      customValueOffset += 1;\n      // TODO: needed ref? ref={customValue} \n      customValueComponent = (\n        <TypeaheadOption \n          key={customValue}\n          hover={selectionIndex === 0}\n          customClasses={customClasses}\n          customValue={customValue}\n          onClick={this.onClick.bind(this, customValue)}\n        >\n          {customValue}\n        </TypeaheadOption>\n      );\n    }\n\n    const results = options.map((result, i) => {\n      const displayString = displayOption(result, i);\n      const uniqueKey = displayString + '_' + i;\n      // TODO: needed ref? ref={uniqueKey} \n      return (\n        <TypeaheadOption \n          key={uniqueKey}\n          hover={selectionIndex === i + customValueOffset}\n          customClasses={customClasses}\n          onClick={this.onClick.bind(this, result)}\n        >\n          {displayString}\n        </TypeaheadOption>\n      );\n    });\n\n    if (areResultsTruncated && resultsTruncatedMessage) {\n      const resultsTruncatedClasses: any = {\n        'results-truncated': true,\n      };\n      const { resultsTruncated } = customClasses;\n      if (resultsTruncated) {\n        resultsTruncatedClasses[resultsTruncated] = true;\n      }\n      const resultsTruncatedClassList = classNames(resultsTruncatedClasses);\n\n      results.push(\n        <li key=\"results-truncated\" className={resultsTruncatedClassList}>\n          {this.props.resultsTruncatedMessage}\n        </li>);\n    }\n    \n    return (\n      <ul className={classList}>\n        {customValueComponent}\n        {results}\n      </ul>\n    );\n  }\n\n  private onClick(result: string, event: React.MouseEvent<HTMLDivElement>) {\n    const { onOptionSelected } = this.props;\n    if (!onOptionSelected) return;\n\n    return onOptionSelected(result, event);\n  }\n}\n\nexport default TypeaheadSelector;\n","/**\n * PolyFills make me sad\n */\n// @ts-ignore\nconst KeyEvent: { [propName: string]: number } = KeyEvent || {};\nKeyEvent.DOM_VK_UP = KeyEvent.DOM_VK_UP || 38;\nKeyEvent.DOM_VK_DOWN = KeyEvent.DOM_VK_DOWN || 40;\nKeyEvent.DOM_VK_BACK_SPACE = KeyEvent.DOM_VK_BACK_SPACE || 8;\nKeyEvent.DOM_VK_RETURN = KeyEvent.DOM_VK_RETURN || 13;\nKeyEvent.DOM_VK_ENTER = KeyEvent.DOM_VK_ENTER || 14;\nKeyEvent.DOM_VK_ESCAPE = KeyEvent.DOM_VK_ESCAPE || 27;\nKeyEvent.DOM_VK_TAB = KeyEvent.DOM_VK_TAB || 9;\n\nexport default KeyEvent;\n","/*\n * Fuzzy\n * https://github.com/myork/fuzzy\n *\n * Copyright (c) 2012 Matt York\n * Licensed under the MIT license.\n */\n\n(function() {\n\nvar root = this;\n\nvar fuzzy = {};\n\n// Use in node or in browser\nif (typeof exports !== 'undefined') {\n  module.exports = fuzzy;\n} else {\n  root.fuzzy = fuzzy;\n}\n\n// Return all elements of `array` that have a fuzzy\n// match against `pattern`.\nfuzzy.simpleFilter = function(pattern, array) {\n  return array.filter(function(str) {\n    return fuzzy.test(pattern, str);\n  });\n};\n\n// Does `pattern` fuzzy match `str`?\nfuzzy.test = function(pattern, str) {\n  return fuzzy.match(pattern, str) !== null;\n};\n\n// If `pattern` matches `str`, wrap each matching character\n// in `opts.pre` and `opts.post`. If no match, return null\nfuzzy.match = function(pattern, str, opts) {\n  opts = opts || {};\n  var patternIdx = 0\n    , result = []\n    , len = str.length\n    , totalScore = 0\n    , currScore = 0\n    // prefix\n    , pre = opts.pre || ''\n    // suffix\n    , post = opts.post || ''\n    // String to compare against. This might be a lowercase version of the\n    // raw string\n    , compareString =  opts.caseSensitive && str || str.toLowerCase()\n    , ch;\n\n  pattern = opts.caseSensitive && pattern || pattern.toLowerCase();\n\n  // For each character in the string, either add it to the result\n  // or wrap in template if it's the next string in the pattern\n  for(var idx = 0; idx < len; idx++) {\n    ch = str[idx];\n    if(compareString[idx] === pattern[patternIdx]) {\n      ch = pre + ch + post;\n      patternIdx += 1;\n\n      // consecutive characters should increase the score more than linearly\n      currScore += 1 + currScore;\n    } else {\n      currScore = 0;\n    }\n    totalScore += currScore;\n    result[result.length] = ch;\n  }\n\n  // return rendered string if we have a match for every char\n  if(patternIdx === pattern.length) {\n    // if the string is an exact match with pattern, totalScore should be maxed\n    totalScore = (compareString === pattern) ? Infinity : totalScore;\n    return {rendered: result.join(''), score: totalScore};\n  }\n\n  return null;\n};\n\n// The normal entry point. Filters `arr` for matches against `pattern`.\n// It returns an array with matching values of the type:\n//\n//     [{\n//         string:   '<b>lah' // The rendered string\n//       , index:    2        // The index of the element in `arr`\n//       , original: 'blah'   // The original element in `arr`\n//     }]\n//\n// `opts` is an optional argument bag. Details:\n//\n//    opts = {\n//        // string to put before a matching character\n//        pre:     '<b>'\n//\n//        // string to put after matching character\n//      , post:    '</b>'\n//\n//        // Optional function. Input is an entry in the given arr`,\n//        // output should be the string to test `pattern` against.\n//        // In this example, if `arr = [{crying: 'koala'}]` we would return\n//        // 'koala'.\n//      , extract: function(arg) { return arg.crying; }\n//    }\nfuzzy.filter = function(pattern, arr, opts) {\n  if(!arr || arr.length === 0) {\n    return [];\n  }\n  if (typeof pattern !== 'string') {\n    return arr;\n  }\n  opts = opts || {};\n  return arr\n    .reduce(function(prev, element, idx, arr) {\n      var str = element;\n      if(opts.extract) {\n        str = opts.extract(element);\n      }\n      var rendered = fuzzy.match(pattern, str, opts);\n      if(rendered != null) {\n        prev[prev.length] = {\n            string: rendered.rendered\n          , score: rendered.score\n          , index: idx\n          , original: element\n        };\n      }\n      return prev;\n    }, [])\n\n    // Sort by score. Browsers are inconsistent wrt stable/unstable\n    // sorting, so force stable by using the index in the case of tie.\n    // See http://ofb.net/~sethml/is-sort-stable.html\n    .sort(function(a,b) {\n      var compare = b.score - a.score;\n      if(compare) return compare;\n      return a.index - b.index;\n    });\n};\n\n\n}());\n\n","import * as React from 'react';\nimport bind from 'bind-decorator';\nimport Accessor from '../accessor';\nimport TypeaheadSelector, { Props as TypelistProps } from './selector';\nimport KeyEvent from '../keyevent';\nimport fuzzy, { FilterOptions } from 'fuzzy';\nimport classNames from 'classnames';\nimport { CustomClasses, Option, OptionToStrFn } from '../types';\nimport { Input, InputProps } from 'reactstrap';\n\nexport type OnOptionSelectArg<Opt extends Option> = \n  ((option: Opt | string, event?: React.SyntheticEvent<HTMLAnchorElement>) => any);\n\nexport type AnyReactWithProps<Opt extends Option> = \n  React.Component<TypelistProps<Opt>> | \n  React.PureComponent<TypelistProps<Opt>> |\n  React.SFC<TypelistProps<Opt>>;\n\nexport interface Props<Opt extends Option, Mapped> extends InputProps {\n  name?: string;\n  customClasses?: CustomClasses;\n  maxVisible?: number;\n  resultsTruncatedMessage?: string;\n  options: Opt[];\n  allowCustomValues?: number;\n  initialValue?: string;\n  value?: string;\n  placeholder?: string;\n  disabled?: boolean;\n  textarea?: boolean;\n  inputProps?: object;\n  onOptionSelected?: OnOptionSelectArg<Mapped>;\n  filterOption?: string | ((value: string, option: Opt) => boolean);\n  searchOptions?: ((value: string, option: Opt[]) => Mapped[]);\n  displayOption?: string | OptionToStrFn<Mapped>;\n  inputDisplayOption?: string | OptionToStrFn<Mapped>;\n  formInputOption?: string | OptionToStrFn<Mapped>;\n  defaultClassNames?: boolean;\n  customListComponent?: AnyReactWithProps<Opt>;\n  showOptionsWhenEmpty?: boolean;\n  innerRef?: (c: HTMLInputElement) => any;\n}\n\nexport interface State<Mapped> {\n  // The options matching the entry value\n  searchResults: Mapped[];\n\n  // This should be called something else, \"entryValue\"\n  entryValue: string;\n\n  // A valid typeahead value\n  selection?: string;\n\n  // Index of the selection\n  selectionIndex?: number;\n\n  // Keep track of the focus state of the input element, to determine\n  // whether to show options when empty (if showOptionsWhenEmpty is true)\n\n  isFocused: boolean;\n  // true when focused, false onOptionSelected\n  showResults: boolean;\n}\n\n/**\n * A \"typeahead\", an auto-completing text input\n *\n * Renders an text input that shows options nearby that you can use the\n * keyboard or mouse to select.  Requires CSS for MASSIVE DAMAGE.\n */\nclass Typeahead<T extends Option, Mapped> extends React.Component<\n  Props<T, Mapped>,\n  State<Mapped>\n> {\n  constructor(props: Props<T, Mapped>) {\n    super(props);\n\n    this.state = {\n      // The options matching the entry value\n      searchResults: this.getOptionsForValue(props.initialValue, props.options),\n\n      // This should be called something else, \"entryValue\"\n      entryValue: props.value || '',\n\n      // A valid typeahead value\n      selection: props.value,\n\n      // Index of the selection\n      selectionIndex: undefined,\n\n      // Keep track of the focus state of the input element, to determine\n      // whether to show options when empty (if showOptionsWhenEmpty is true)\n      isFocused: false,\n\n      // true when focused, false onOptionSelected\n      showResults: false,\n    };\n  }\n\n  public inputElement?: HTMLInputElement;\n\n  // Hack due to buggy defaultprops handling in typescript\n  private getProps() {\n    const customClasses: CustomClasses = {};\n    return {\n      ...{\n        customClasses,\n        allowCustomValues: 0,\n        initialValue: '',\n        value: '',\n        disabled: false,\n        textarea: false,\n        customListComponent: TypeaheadSelector,\n        showOptionsWhenEmpty: false,\n      },\n      ...this.props,\n    };\n  }\n\n  private shouldSkipSearch(input?: string) {\n    const emptyValue = !input || input.trim().length === 0;\n\n    // this.state must be checked because it may not be defined yet if this function\n    // is called from within getInitialState\n    const isFocused = this.state && this.state.isFocused;\n    return !(this.props.showOptionsWhenEmpty && isFocused) && emptyValue;\n  }\n\n  getOptionsForValue(value?: string, options?: T[]): Mapped[] {\n    if (this.shouldSkipSearch(value)) {\n      return [];\n    }\n\n    const searchOptions = this.generateSearchFunction();    \n    return searchOptions(value || '', options || this.getProps().options);\n  }\n\n  setEntryText(value: string) {\n    if (!this.inputElement) return;\n    this.inputElement.value = value;\n    this.onTextEntryUpdated();\n  }\n\n  @bind\n  focus() {\n    if (!this.inputElement) return;\n    this.inputElement.focus();\n  }\n\n  private hasCustomValue() {\n    const { allowCustomValues } = this.getProps();\n    const { entryValue, searchResults } = this.state;\n\n    if (\n      !allowCustomValues ||\n      allowCustomValues > 0 ||\n      entryValue.length >= allowCustomValues\n    ) {\n      return false;\n    }\n\n    const mapper = this.getInputOptionToStringMapper();\n    return searchResults.map(mapper).indexOf(this.state.entryValue) < 0;\n  }\n\n  private getCustomValue() {\n    if (this.hasCustomValue()) {\n      return this.state.entryValue;\n    }\n    return undefined;\n  }\n\n  private renderIncrementalSearchResults() {\n    const { entryValue, selection, searchResults, selectionIndex } = this.state;\n    const {\n      maxVisible,\n      resultsTruncatedMessage,\n      displayOption,\n      allowCustomValues,\n      customClasses,\n      defaultClassNames,\n    } = this.getProps();\n\n    // Nothing has been entered into the textbox\n    if (this.shouldSkipSearch(entryValue)) {\n      return '';\n    }\n\n    // Something was just selected\n    if (selection) {\n      return '';\n    }\n\n    const truncated: boolean = Boolean(\n      maxVisible && searchResults.length > maxVisible,\n    );\n    return (\n      <TypeaheadSelector\n        options={\n          maxVisible ? searchResults.slice(0, maxVisible) : searchResults\n        }\n        areResultsTruncated={truncated}\n        onOptionSelected={this.onOptionSelected}\n        customValue={this.getCustomValue()}\n        displayOption={Accessor.generateOptionToStringFor(displayOption)}\n        {...{\n          allowCustomValues,\n          resultsTruncatedMessage,\n          customClasses,\n          selectionIndex,\n          defaultClassNames,\n        }}\n      />\n    );\n  }\n\n  getSelection(): Mapped | string | undefined {\n    let index = this.state.selectionIndex;\n    if (index === undefined) return undefined;\n\n    if (this.hasCustomValue()) {\n      if (index === 0) {\n        return this.state.entryValue;\n      }\n      index -= 1;\n    }\n\n    return this.state.searchResults[index];\n  }\n\n  private inputMapper?: OptionToStrFn<Mapped>;\n  private getInputOptionToStringMapper(): OptionToStrFn<Mapped> {\n    if (this.inputMapper) {\n      return this.inputMapper;\n    }\n\n    const {\n      formInputOption,\n      inputDisplayOption,\n      displayOption,\n    } = this.getProps();\n    const anyToStrFn = formInputOption || inputDisplayOption || displayOption;\n    this.inputMapper = Accessor.generateOptionToStringFor(anyToStrFn);\n\n    return this.inputMapper;\n  }\n\n  private displayMapper?: OptionToStrFn<Mapped>;\n  private getDisplayOptionToStringMapper(): OptionToStrFn<Mapped> {\n    if (this.displayMapper) {\n      return this.displayMapper;\n    }\n\n    const { displayOption, inputDisplayOption } = this.getProps();\n    this.displayMapper = Accessor.generateOptionToStringFor(\n      inputDisplayOption || displayOption,\n    );\n\n    return this.displayMapper;\n  }\n\n  @bind\n  private onOptionSelected(\n    option: Mapped | string,\n    event: React.SyntheticEvent<any>,\n  ) {\n    if (!this.inputElement) throw new Error('No input element');\n    this.inputElement.focus();\n\n    let optionString: string;\n    let formInputOptionString: string;\n    if (typeof option === 'string') {\n      optionString = option as string;\n      formInputOptionString = option as string;\n    } else {\n      const displayOption = this.getDisplayOptionToStringMapper();\n      optionString = displayOption(option, 0);\n\n      const formInputOption = this.getInputOptionToStringMapper();\n      formInputOptionString = formInputOption(option);\n    }\n\n    this.inputElement.value = optionString;\n    this.setState({\n      searchResults: this.getOptionsForValue(optionString),\n      selection: formInputOptionString,\n      entryValue: optionString,\n      showResults: false,\n    });\n    return (\n      this.props.onOptionSelected && this.props.onOptionSelected(option, event)\n    );\n  }\n\n  @bind\n  private onTextEntryUpdated(newValue?: string) {\n    if (!this.inputElement) throw new Error('No input element');\n    const value = newValue === undefined ? this.inputElement.value : newValue;\n\n    this.setState({\n      searchResults: this.getOptionsForValue(value),\n      selection: '',\n      entryValue: value,\n    });\n  }\n\n  @bind\n  private onEnter(event: React.KeyboardEvent<HTMLInputElement>) {\n    const selection = this.getSelection();\n    if (!selection) {\n      return this.props.onKeyDown && this.props.onKeyDown(event);\n    }\n    return this.onOptionSelected(selection, event);\n  }\n\n  @bind\n  private onEscape() {\n    this.setState({\n      selectionIndex: undefined,\n    });\n  }\n\n  @bind\n  private onTab(event: React.KeyboardEvent<HTMLInputElement>) {\n    const selection = this.getSelection();\n\n    let option = selection\n      ? selection\n      : this.state.searchResults.length > 0\n        ? this.state.searchResults[0]\n        : undefined;\n\n    if (option === undefined && this.hasCustomValue()) {\n      option = this.getCustomValue();\n    }\n\n    if (option !== undefined) {\n      return this.onOptionSelected(option, event);\n    }\n  }\n\n  eventMap() {\n    const events: any = {};\n\n    events[KeyEvent.DOM_VK_UP] = this.navUp;\n    events[KeyEvent.DOM_VK_DOWN] = this.navDown;\n    events[KeyEvent.DOM_VK_RETURN] = events[\n      KeyEvent.DOM_VK_ENTER\n    ] = this.onEnter;\n    events[KeyEvent.DOM_VK_ESCAPE] = this.onEscape;\n    events[KeyEvent.DOM_VK_TAB] = this.onTab;\n\n    return events;\n  }\n\n  private nav(delta: number) {\n    if (!this.hasHint()) {\n      return;\n    }\n\n    const { selectionIndex, searchResults } = this.state;\n    const { maxVisible } = this.getProps();\n    let newIndex =\n      selectionIndex === undefined\n        ? delta === 1\n          ? 0\n          : delta\n        : selectionIndex + delta;\n    let length = maxVisible\n      ? searchResults.slice(0, maxVisible).length\n      : searchResults.length;\n    if (this.hasCustomValue()) {\n      length += 1;\n    }\n\n    if (newIndex < 0) {\n      newIndex += length;\n    } else if (newIndex >= length) {\n      newIndex -= length;\n    }\n\n    this.setState({ selectionIndex: newIndex });\n  }\n\n  @bind\n  navDown() {\n    this.nav(1);\n  }\n\n  @bind\n  navUp() {\n    this.nav(-1);\n  }\n\n  @bind\n  private onChange(event: React.ChangeEvent<HTMLInputElement>) {\n    const { onChange } = this.getProps();\n    if (onChange) {\n      onChange(event);\n    }\n\n    this.onTextEntryUpdated(event.target.value);\n  }\n\n  @bind\n  private onKeyDown(event: React.KeyboardEvent<HTMLInputElement>) {\n    // If there are no visible elements, don't perform selector navigation.\n    // Just pass this up to the upstream onKeydown handler.\n    // Also skip if the user is pressing the shift key,\n    // since none of our handlers are looking for shift\n    if (!this.hasHint() || event.shiftKey) {\n      return this.props.onKeyDown && this.props.onKeyDown(event);\n    }\n\n    const handler = this.eventMap()[event.keyCode];\n    if (handler) {\n      handler(event);\n    } else {\n      return this.props.onKeyDown && this.props.onKeyDown(event);\n    }\n    // Don't propagate the keystroke back to the DOM/browser\n    event.preventDefault();\n  }\n\n  componentWillReceiveProps(nextProps: Props<T, Mapped>) {\n    const searchResults = this.getOptionsForValue(\n      this.state.entryValue,\n      nextProps.options,\n    );\n    const showResults = Boolean(searchResults.length) && this.state.isFocused;\n    this.setState({ searchResults, showResults });\n  }\n\n  render() {\n    const {\n      customClasses: { input },\n      className,\n    } = this.getProps();\n    const inputClasses: any = {};\n    if (input) {\n      inputClasses[input] = true;\n    }\n    const inputClassList = classNames(inputClasses);\n\n    const classes: any = {\n      typeahead: this.props.defaultClassNames,\n    };\n    if (className) {\n      classes[className] = true;\n    }\n    const classList = classNames(classes);\n\n    return (\n      <div className={classList}>\n        {this.renderHiddenInput()}\n        <Input\n          innerRef={(c: HTMLInputElement) => {\n            this.inputElement = c;\n            this.props.innerRef && this.props.innerRef(c);\n          }}\n          type={this.props.textarea ? 'textarea' : 'text'}\n          disabled={this.props.disabled}\n          {...this.props.inputProps}\n          placeholder={this.props.placeholder}\n          className={inputClassList}\n          value={this.state.entryValue}\n          onChange={this.onChange}\n          onKeyDown={this.onKeyDown}\n          onKeyPress={this.props.onKeyPress}\n          onKeyUp={this.props.onKeyUp}\n          onFocus={this.onFocus}\n          onBlur={this.onBlur}\n        />\n        {this.state.showResults && this.renderIncrementalSearchResults()}\n      </div>\n    );\n  }\n\n  @bind\n  private onFocus(event: React.FocusEvent<HTMLInputElement>) {\n    this.setState({ isFocused: true, showResults: true }, () => {\n      this.onTextEntryUpdated();\n    });\n    this.props.onFocus && this.props.onFocus(event);\n  }\n\n  @bind\n  private onBlur(event: React.FocusEvent<HTMLInputElement>) {\n    this.setState({ isFocused: false }, () => {\n      this.onTextEntryUpdated();\n    });\n    this.props.onBlur && this.props.onBlur(event);\n  }\n\n  private renderHiddenInput() {\n    const { name } = this.getProps();\n    if (!name) {\n      return null;\n    }\n\n    return <input type=\"hidden\" name={name} value={this.state.selection} />;\n  }\n\n  private searchFunction?: (value: string, options: T[]) => Mapped[];\n  private generateSearchFunction(): (value: string, options: T[]) => Mapped[] {\n    if (this.searchFunction) {\n      return this.searchFunction;\n    }\n    const { searchOptions, filterOption } = this.getProps();\n    if (typeof searchOptions === 'function') {\n      if (filterOption !== undefined) {\n        console.warn(\n          'searchOptions prop is being used, filterOption prop will be ignored',\n        );\n      }\n\n      this.searchFunction = searchOptions;\n\n    } else if (typeof filterOption === 'function') {\n  \n      this.searchFunction = (value: string, options: T[]): Mapped[] =>\n      options.filter(o => filterOption(value, o)).map(a => a as any);\n      \n    } else {\n  \n      let mapper: (input: any) => string;\n      if (typeof filterOption === 'string') {\n        mapper = Accessor.generateAccessor(filterOption);\n      } else {\n        mapper = Accessor.IDENTITY_FN;\n      }\n      \n      \n      this.searchFunction = (value: string, options: T[]) => {\n        const fuzzyOpt: FilterOptions<any> = { extract: mapper };\n        return fuzzy\n          .filter(value, options, fuzzyOpt)\n          .map((res: { index: number }) => options[res.index] as any);\n      };\n    }\n\n    return this.searchFunction;\n  }\n\n  private hasHint() {\n    return this.state.searchResults.length > 0 || this.hasCustomValue();\n  }\n}\n\nexport default Typeahead;\n","import * as React from 'react';\nimport classNames from 'classnames';\n\nexport interface Props {\n  className?: string;\n  name?: string;\n  children: React.ReactNode | string;\n  object: string | object;\n  onRemove: Function;\n  value: string;\n  key: string | number;\n}\n\n/**\n * Encapsulates the rendering of an option that has been \"selected\" in a\n * TypeaheadTokenizer\n */ \nclass Token extends React.Component<Props> {\n  \n  render() {\n    const className = classNames([\n      'typeahead-token',\n      this.props.className,\n    ]);\n\n    return (\n      <div className={className} key={this.props.key}>\n        {this.renderHiddenInput()}\n        {this.props.children}\n        {this.renderCloseButton()}\n      </div>\n    );\n  }\n\n  private renderHiddenInput() {\n    const { name, value, object } = this.props;\n    // If no name was set, don't create a hidden input\n    if (!name) {\n      return null;\n    }\n\n    const hiddenValue = value || object;\n    if (typeof hiddenValue !== 'string') {\n      throw new Error('Expected either string value or string object');\n    }\n    return (\n      <input\n        type=\"hidden\"\n        name={name + '[]'}\n        value={hiddenValue}\n      />\n    );\n  }\n\n  renderCloseButton() {\n    if (!this.props.onRemove) {\n      return '';\n    }\n\n    return (\n      <a\n        className={this.props.className || 'typeahead-token-close'} \n        href=\"#\" \n        onClick={(event: React.MouseEvent<HTMLAnchorElement>) => {\n          this.props.onRemove(this.props.object);\n          event.preventDefault();\n        }}\n      >\n        &#x00d7;\n      </a>);\n  }\n}\n\nexport default Token;\n","import * as React from 'react';\nimport bind from 'bind-decorator';\nimport Accessor from '../accessor';\nimport Token from './token';\nimport KeyEvent from '../keyevent';\nimport Typeahead from '../typeahead';\nimport classNames from 'classnames';\nimport { InputProps } from 'reactstrap';\nimport { TokenCustomClasses, Option, OptionToStrFn } from '../types';\n\nconst arraysAreDifferent = (array1: any[], array2: any[]): boolean => {\n  if (array1.length !== array2.length) {\n    return true;\n  }\n\n  for (let i = array2.length - 1; i >= 0; i -= 1) {\n    if (array2[i] !== array1[i]) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nexport interface Props<Opt extends Option> extends InputProps {\n  name?: string;\n  options: Opt[];\n  customClasses?: TokenCustomClasses;\n  allowCustomValues?: number;\n  defaultSelected: any[];\n  initialValue?: string;\n  placeholder?: string;\n  disabled?: boolean;\n  inputProps: object;\n  onTokenRemove?: Function;\n  onTokenAdd?: Function;\n  filterOption?: string | Function;\n  searchOptions?: Function;\n  displayOption?: string | OptionToStrFn<Opt>;\n  formInputOption?: string | OptionToStrFn<Opt>;\n  maxVisible?: number;\n  resultsTruncatedMessage?: string;\n  defaultClassNames?: boolean;\n  showOptionsWhenEmpty?: boolean;\n}\n\nexport interface State<Opt extends Option> {\n  selected: Opt[];\n}\n\n/**\n * A typeahead that, when an option is selected, instead of simply filling\n * the text entry widget, prepends a renderable \"token\", that may be deleted\n * by pressing backspace on the beginning of the line with the keyboard.\n */\nclass TypeaheadTokenizer<T> extends React.Component<Props<T>, State<T>> {\n  constructor(props: Props<T>) {\n    super(props);\n\n    const { defaultSelected = [] } = props;\n    this.state = {\n      // We need to copy this to avoid incorrect sharing\n      // of state across instances (e.g., via getDefaultProps())\n      selected: defaultSelected.slice(0),\n    };\n  }\n\n  private getProps() {\n    const customClasses: TokenCustomClasses = {};\n    return {\n      ...{\n        customClasses,\n        allowCustomValues: 0,\n        disabled: false,\n        inputProps: {},\n        defaultClassNames: true,\n        showOptionsWhenEmpty: false,\n      },\n      ...this.props,\n    };\n  }\n\n  private inputMapper?: OptionToStrFn<T>;\n  private getInputOptionToStringMapper(): OptionToStrFn<T> {\n    if (this.inputMapper) {\n      return this.inputMapper;\n    }\n\n    const { formInputOption, displayOption } = this.getProps();\n    const anyToStrFn = formInputOption || displayOption;\n    this.inputMapper = Accessor.generateOptionToStringFor(anyToStrFn);\n\n    return this.inputMapper;\n  }\n\n  componentWillReceiveProps(nextProps: Props<T>) {\n    // if we get new defaultProps, update selected\n    if (arraysAreDifferent(this.props.defaultSelected, nextProps.defaultSelected)) {\n      this.setState({ selected: nextProps.defaultSelected.slice(0) });\n    }\n  }\n\n  typeaheadElement?: HTMLInputElement;\n  focus() {\n    if (!this.typeaheadElement) throw new Error('No typeahead element');\n    this.typeaheadElement.focus();\n  }\n\n  getSelectedTokens() {\n    return this.state.selected;\n  }\n\n  // TODO: Support initialized tokens\n  //\n  private renderTokens() {\n    const { \n      customClasses: { token }, displayOption, formInputOption, name,\n    } = this.getProps();\n    const tokenClasses: any = {};\n    if (token) tokenClasses[token] = true;\n    const classList: string = classNames(tokenClasses);\n\n    const result = this.state.selected\n      .map((selected) => {\n        const displayString = Accessor.valueForOption(selected, displayOption);\n        const value = Accessor.valueForOption(selected, formInputOption || displayOption);\n        if (!displayString || !value) throw new Error('Expected string and value to exist');\n\n        const key: string = displayString;\n        return (\n          <Token \n            key={key} \n            className={classList}\n            onRemove={this.removeTokenForValue}\n            object={selected}\n            value={value}\n            name={name}\n          >\n            {displayString}\n          </Token>\n        );\n      });\n    return result;\n  }\n\n  private getOptionsForTypeahead() {\n    // return this.props.options without this.selected\n    return this.props.options;\n  }\n\n  @bind\n  private onKeyDown(event: React.KeyboardEvent<HTMLInputElement>) {\n    // We only care about intercepting backspaces\n    if (event.keyCode === KeyEvent.DOM_VK_BACK_SPACE) {\n      return this.handleBackspace(event);\n    }\n    this.props.onKeyDown && this.props.onKeyDown(event);\n  }\n\n  private handleBackspace(event: React.KeyboardEvent<HTMLInputElement>) {\n    // No tokens\n    if (!this.state.selected.length) {\n      return;\n    }\n\n    // Remove token ONLY when bksp pressed at beginning of line\n    // without a selection\n    if (!this.typeaheadElement) throw new Error('Expected typeahead element to exist');\n    if (this.typeaheadElement.selectionStart === this.typeaheadElement.selectionEnd &&\n        this.typeaheadElement.selectionStart === 0) {\n      this.removeTokenForValue(\n        this.state.selected[this.state.selected.length - 1]);\n      event.preventDefault();\n    }\n  }\n\n  private getSelectedIndex(value: T) {\n    const mapper = this.getInputOptionToStringMapper();\n    const searchStr: string = mapper(value);\n    return this.state.selected\n      .map(mapper)\n      .indexOf(searchStr);\n  }\n  private removeTokenForValue(value: T) {\n    const index = this.getSelectedIndex(value);\n    if (index === -1) {\n      return;\n    }\n\n    this.state.selected.splice(index, 1);\n    this.setState({ selected: this.state.selected });\n    this.props.onTokenRemove && this.props.onTokenRemove(value);\n    return;\n  }\n\n  @bind\n  private addTokenForValue(value: T) {\n    let { selected } = this.state;\n    if (this.getSelectedIndex(value) !== -1) {\n      return;\n    }\n    selected = [...selected, value];\n    this.setState({ selected });\n    \n    if (!this.typeaheadElement) throw new Error('Expected typahead to be set');\n\n    this.typeaheadElement.value = '';\n    this.props.onTokenAdd && this.props.onTokenAdd(value);\n  }\n\n  render() {\n    const { \n      className, customClasses = {}, disabled, inputProps,\n      allowCustomValues, initialValue = '',\n      maxVisible, resultsTruncatedMessage, placeholder,\n      onKeyPress, onKeyUp, onFocus, onBlur,\n      showOptionsWhenEmpty, displayOption,\n      defaultClassNames, filterOption,\n      searchOptions,\n    } = this.getProps();\n    const classes: any = {};\n    const { typeahead } = customClasses;\n    if (typeahead) {\n      classes[typeahead] = true;\n    }\n    const classList:any = classNames(classes);\n    const tokenizerClasses: string[] = [];\n    if (defaultClassNames) {\n      tokenizerClasses.push('typeahead-tokenizer');\n    }\n    if (className) {\n      tokenizerClasses.push(className);\n    }\n    const tokenizerClassList = classNames(tokenizerClasses);\n\n    const args2Pass = {\n      placeholder,\n      disabled,\n      inputProps,\n      customClasses,\n      allowCustomValues,\n      initialValue,\n      maxVisible,\n      resultsTruncatedMessage,\n      onKeyPress,\n      onKeyUp,\n      onFocus,\n      onBlur,\n      displayOption,\n      defaultClassNames,\n      filterOption,\n      searchOptions,\n      showOptionsWhenEmpty,\n    };\n\n    return (\n      <div className={tokenizerClassList}>\n        {this.renderTokens()}\n        <Typeahead \n          // @ts-ignore - issue with addTokenForValue!?\n          innerRef={(c: HTMLInputElement) => this.typeaheadElement = c}\n          className={classList}\n          {...args2Pass}\n          options={this.getOptionsForTypeahead()}\n          onOptionSelected={this.addTokenForValue}\n          onKeyDown={this.onKeyDown}\n        />\n      </div>\n    );\n  }\n}\n\nexport default TypeaheadTokenizer;\n"],"names":["define","tslib_1.__extends","classNames","React.createElement","React.Component","Input","tslib_1.__decorate"],"mappings":"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"}