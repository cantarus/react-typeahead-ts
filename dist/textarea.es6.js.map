{"version":3,"file":"textarea.es6.js","sources":["../src/accessor.ts","../src/typeahead/option.tsx","../src/typeahead/selector.tsx","../src/keyevent.ts","../src/typeahead/index.tsx","../src/tokenizer/token.tsx","../src/tokenizer/index.tsx"],"sourcesContent":["export default class Accessor {\n  // tslint:disable-next-line\n  static IDENTITY_FN<T>(input: T): T { return input; }\n\n  static generateAccessor(field: string) {\n    return (object: { [propName: string]: any }) => object[field];\n  }\n\n  static generateOptionToStringFor(prop?: string | Function) {\n    if (typeof prop === 'string') {\n      return Accessor.generateAccessor(prop);\n    } \n    \n    if (typeof prop === 'function') {\n      return prop;\n    }\n    \n    return Accessor.IDENTITY_FN;\n  }\n\n  static valueForOption<T>(\n    option: string | ((arg: T) => string), \n    object: T,\n  ): string | void {\n    if (typeof option === 'string') {\n      if (typeof object !== 'object') throw new Error(`Invalid object type ${typeof object}`);\n      // @ts-ignore\n      return object[option];\n    } \n    \n    if (typeof option === 'function') {\n      return option(object);\n    }\n\n    if (typeof object === 'string') {\n      return object;\n    }\n    \n    throw new Error(`Invalid object type ${typeof object}`);\n  }\n}\n","import * as React from 'react';\nimport classNames from 'classnames';\n\nexport interface CustomClasses {\n  listItem?: string;\n  hover?: string;\n  customAdd?: string;\n  listAnchor?: string;\n}\n\nexport interface Props {\n  customClasses?: CustomClasses;\n  customValue?: string;\n  onClick: Function;\n  children: React.ReactNode;\n  hover?: boolean;\n}\n\n/**\n * A single option within the TypeaheadSelector\n */\nclass TypeaheadOption extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  private getDefaultProps() {\n    const customClasses: CustomClasses = { hover: 'hover' };\n    return {\n      customClasses,\n      onClick: (event: React.MouseEvent<HTMLDivElement>) => {\n        event.preventDefault();\n      },\n      hover: false,\n    };\n  }\n\n  render() {\n    const { \n      customClasses, hover,\n      children, customValue,\n     } = { ...this.getDefaultProps(), ...this.props };\n\n    const classes: any = {};\n    const { listItem, hover: hoverClass = 'hover', customAdd } = customClasses;\n    classes[hoverClass] = Boolean(hover);\n    if (listItem) {\n      classes[listItem] = Boolean(listItem);\n    }\n\n    if (customValue && customAdd) {\n      classes[customAdd] = Boolean(customAdd);\n    }\n\n    const classList = classNames(classes);\n\n    // For some reason onClick is not fired when clicked on an option\n    // onMouseDown is used here as a workaround of #205 and other\n    // related tickets\n    return (\n      <li className={classList} onClick={this.onClick} onMouseDown={this.onClick}>\n        <a \n          href=\"javascript: void 0;\" \n          className={this.getClasses()} \n          // tslint:disable-next-line:jsx-no-string-ref\n          ref=\"anchor\"\n        >\n          {children}\n        </a>\n      </li>\n    );\n  }\n\n  getClasses() {\n    const { customClasses } = { ...this.getDefaultProps(), ...this.props };\n    const classes: any = {\n      'typeahead-option': true,\n    };\n    const { listAnchor } = customClasses;\n    if (listAnchor) {\n      classes[listAnchor] = true;\n    }\n\n    return classNames(classes);\n  }\n\n  onClick(event: React.MouseEvent<HTMLLIElement>) {\n    event.preventDefault();\n    return this.props.onClick(event);\n  }\n}\n\nexport default TypeaheadOption;\n","import * as React from 'react';\nimport classNames from 'classnames';\nimport TypeaheadOption from './option';\nimport { CustomClasses, OptionSelector } from '../types';\n\nexport interface Props {\n  options: string[];\n  allowCustomValues?: number;\n  customClasses?: CustomClasses;\n  customValue?: string;\n  selectionIndex?: number;\n  onOptionSelected?: OptionSelector;\n  displayOption: Function;\n  defaultClassNames?: boolean;\n  areResultsTruncated?: boolean;\n  resultsTruncatedMessage?: string;\n}\n\n/**\n * Container for the options rendered as part of the autocompletion process\n * of the typeahead\n */\nclass TypeaheadSelector extends React.Component<Props> {\n  private getDefaultProps() {\n    const customClasses: CustomClasses = {};\n    return {\n      customClasses,\n      allowCustomValues: 0,\n      onOptionSelected: () => {},\n      defaultClassNames: true,\n    };\n  }\n\n  render() {\n    const { \n      options, customClasses, customValue, displayOption,\n      defaultClassNames, allowCustomValues, selectionIndex,\n      areResultsTruncated, resultsTruncatedMessage,\n    } = \n      { ...this.getDefaultProps(), ...this.props };\n    // Don't render if there are no options to display\n    if (!options.length && allowCustomValues <= 0) {\n      return false;\n    }\n\n    const classes: any = {\n      'typeahead-selector': defaultClassNames,\n    };\n    const { results: resClass } = customClasses;\n    if (resClass) {\n      classes[resClass] = true;\n    }\n    const classList = classNames(classes);\n\n    // CustomValue should be added to top of results list with different class name\n    let customValueComponent;\n    let customValueOffset = 0;\n    if (customValue) {\n      customValueOffset += 1;\n      customValueComponent = (\n        <TypeaheadOption \n          ref={customValue} \n          key={customValue}\n          hover={selectionIndex === 0}\n          customClasses={customClasses}\n          customValue={customValue}\n          onClick={this.onClick.bind(this, customValue)}\n        >\n          {customValue}\n        </TypeaheadOption>\n      );\n    }\n\n    const results = options.map((result, i) => {\n      const displayString = displayOption(result, i);\n      const uniqueKey = displayString + '_' + i;\n      return (\n        <TypeaheadOption \n          ref={uniqueKey} \n          key={uniqueKey}\n          hover={selectionIndex === i + customValueOffset}\n          customClasses={customClasses}\n          onClick={this.onClick.bind(this, result)}\n        >\n          {displayString}\n        </TypeaheadOption>\n      );\n    });\n\n    if (areResultsTruncated && resultsTruncatedMessage) {\n      const resultsTruncatedClasses: any = {\n        'results-truncated': defaultClassNames,\n      };\n      const { resultsTruncated } = customClasses;\n      if (resultsTruncated) {\n        resultsTruncatedClasses[resultsTruncated] = true;\n      }\n      const resultsTruncatedClassList = classNames(resultsTruncatedClasses);\n\n      results.push(\n        <li key=\"results-truncated\" className={resultsTruncatedClassList}>\n          {this.props.resultsTruncatedMessage}\n        </li>);\n    }\n\n    return (\n      <ul className={classList}>\n        {customValueComponent}\n        {results}\n      </ul>\n    );\n  }\n\n  private onClick(result: string, event: React.MouseEvent<HTMLDivElement>) {\n    const { onOptionSelected } = this.props;\n    if (!onOptionSelected) return;\n\n    return onOptionSelected(result, event);\n  }\n}\n\nexport default TypeaheadSelector;\n","/**\n * PolyFills make me sad\n */\n// @ts-ignore\nconst KeyEvent: { [propName: string]: number } = KeyEvent || {};\nKeyEvent.DOM_VK_UP = KeyEvent.DOM_VK_UP || 38;\nKeyEvent.DOM_VK_DOWN = KeyEvent.DOM_VK_DOWN || 40;\nKeyEvent.DOM_VK_BACK_SPACE = KeyEvent.DOM_VK_BACK_SPACE || 8;\nKeyEvent.DOM_VK_RETURN = KeyEvent.DOM_VK_RETURN || 13;\nKeyEvent.DOM_VK_ENTER = KeyEvent.DOM_VK_ENTER || 14;\nKeyEvent.DOM_VK_ESCAPE = KeyEvent.DOM_VK_ESCAPE || 27;\nKeyEvent.DOM_VK_TAB = KeyEvent.DOM_VK_TAB || 9;\n\nexport default KeyEvent;\n","import * as React from 'react';\nimport Accessor from '../accessor';\nimport TypeaheadSelector, { Props as TypelistProps } from './selector';\nimport KeyEvent from '../keyevent';\nimport fuzzy, { FilterOptions } from 'fuzzy';\nimport classNames from 'classnames';\nimport { CustomClasses } from '../types';\nimport { Input, InputProps } from 'reactstrap';\n\nexport interface Props extends InputProps {\n  name?: string;\n  customClasses: CustomClasses;\n  maxVisible?: number;\n  resultsTruncatedMessage?: string;\n  options: string[];\n  allowCustomValues?: number;\n  initialValue?: string;\n  value?: string;\n  placeholder?: string;\n  disabled?: boolean;\n  textarea?: boolean;\n  inputProps: object;\n  onOptionSelected?: Function;\n  filterOption?: string | Function;\n  searchOptions?: Function;\n  displayOption?: string | Function;\n  inputDisplayOption?: string | Function;\n  formInputOption?: string | Function;\n  defaultClassNames?: boolean;\n  customListComponent?: React.Component<TypelistProps>;\n  showOptionsWhenEmpty?: boolean;\n  innerRef?: (c: HTMLInputElement) => any;\n}\n\nexport interface State {\n  // The options matching the entry value\n  searchResults: string[];\n\n  // This should be called something else, \"entryValue\"\n  entryValue: string;\n\n  // A valid typeahead value\n  selection?: string;\n\n  // Index of the selection\n  selectionIndex?: number;\n\n  // Keep track of the focus state of the input element, to determine\n  // whether to show options when empty (if showOptionsWhenEmpty is true)\n  isFocused: boolean;\n\n  // true when focused, false onOptionSelected\n  showResults: boolean;\n}\n\n/**\n * A \"typeahead\", an auto-completing text input\n *\n * Renders an text input that shows options nearby that you can use the\n * keyboard or mouse to select.  Requires CSS for MASSIVE DAMAGE.\n */\nclass Typeahead extends React.Component<Props, State>{\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      // The options matching the entry value\n      searchResults: this.getOptionsForValue(props.initialValue, props.options),\n\n      // This should be called something else, \"entryValue\"\n      entryValue: props.value || '',\n\n      // A valid typeahead value\n      selection: props.value,\n\n      // Index of the selection\n      selectionIndex: undefined,\n\n      // Keep track of the focus state of the input element, to determine\n      // whether to show options when empty (if showOptionsWhenEmpty is true)\n      isFocused: false,\n\n      // true when focused, false onOptionSelected\n      showResults: false,\n    };\n  }\n\n  public inputElement?: HTMLInputElement;\n\n  getDefaultProps() {\n    return {\n      allowCustomValues: 0,\n      initialValue: '',\n      value: '',\n      disabled: false,\n      textarea: false,\n      customListComponent: TypeaheadSelector,\n      showOptionsWhenEmpty: false,\n      resultsTruncatedMessage: null,\n    };\n  }\n\n  private shouldSkipSearch(input?: string) {\n    const emptyValue = !input || input.trim().length === 0;\n\n    // this.state must be checked because it may not be defined yet if this function\n    // is called from within getInitialState\n    const isFocused = this.state && this.state.isFocused;\n    return !(this.props.showOptionsWhenEmpty && isFocused) && emptyValue;\n  }\n\n  getOptionsForValue(value?: string, options?: string[]) {\n    if (this.shouldSkipSearch(value)) { return []; }\n\n    const searchOptions = this.generateSearchFunction();\n    return searchOptions(value, options);\n  }\n\n  setEntryText(value: string) {\n    if (!this.inputElement) return;\n    this.inputElement.value = value;\n    this.onTextEntryUpdated( );\n  }\n\n  focus() {\n    if (!this.inputElement) return;\n    this.inputElement.focus();\n  }\n\n  private hasCustomValue() {\n    const { allowCustomValues } = { ...this.getDefaultProps, ...this.props };\n    const { entryValue, searchResults } = this.state;\n    \n    return (\n      allowCustomValues && \n      allowCustomValues > 0 &&\n      entryValue.length >= allowCustomValues &&\n      searchResults.indexOf(this.state.entryValue) < 0);\n  }\n\n  private getCustomValue() {\n    if (this.hasCustomValue()) {\n      return this.state.entryValue;\n    }\n    return null;\n  }\n\n  selectElement?: HTMLElement;\n  private renderIncrementalSearchResults() {\n    const { entryValue, selection, searchResults, selectionIndex } = this.state;\n    const {\n      // @ts-ignore\n      maxVisible, resultsTruncatedMessage, customListComponent, \n      allowCustomValues, customClasses, defaultClassNames,\n    } = {\n      ...this.getDefaultProps(),\n      ...this.props,\n    };\n\n    // Nothing has been entered into the textbox\n    if (this.shouldSkipSearch(entryValue)) {\n      return '';\n    }\n\n    // Something was just selected\n    if (selection) {\n      return '';\n    }\n\n    return (\n      // @ts-ignore\n      <customListComponent\n        innerRef={(c: HTMLElement) => this.selectElement = c}\n        options={maxVisible ? searchResults.slice(0, maxVisible) : searchResults}\n        areResultsTruncated={maxVisible && searchResults.length > maxVisible}\n        resultsTruncatedMessage={resultsTruncatedMessage}\n        onOptionSelected={this.onOptionSelected}\n        allowCustomValues={allowCustomValues}\n        customValue={this.getCustomValue()}\n        customClasses={customClasses}\n        selectionIndex={selectionIndex}\n        defaultClassNames={defaultClassNames}\n        displayOption={Accessor.generateOptionToStringFor(this.props.displayOption)} \n      />\n    );\n  }\n\n  getSelection() {\n    let index = this.state.selectionIndex;\n    if (index === undefined) throw new Error('No index set');\n    if (this.hasCustomValue()) {\n      if (index === 0) {\n        return this.state.entryValue;\n      }\n      index -= 1;\n    }\n    return this.state.searchResults[index];\n  }\n\n  private onOptionSelected(option: string, event: React.SyntheticEvent<any>) {\n    if (!this.inputElement) throw new Error('No input element');\n    this.inputElement.focus();\n\n    let { displayOption, formInputOption } = this.props;\n    displayOption = Accessor\n      .generateOptionToStringFor(this.props.inputDisplayOption || displayOption);\n    const optionString = displayOption(option, 0);\n\n    formInputOption = Accessor.generateOptionToStringFor(formInputOption || displayOption);\n    const formInputOptionString = formInputOption(option);\n\n    this.inputElement.value = optionString;\n    this.setState({\n      searchResults: this.getOptionsForValue(optionString, this.props.options),\n      selection: formInputOptionString,\n      entryValue: optionString,\n      showResults: false,\n    });\n    return this.props.onOptionSelected && this.props.onOptionSelected(option, event);\n  }\n\n  private onTextEntryUpdated() {\n    if (!this.inputElement) throw new Error('No input element');\n    const value = this.inputElement.value;\n    this.setState({\n      searchResults: this.getOptionsForValue(value, this.props.options),\n      selection: '',\n      entryValue: value,\n    });\n  }\n\n  private onEnter(event: React.KeyboardEvent<HTMLInputElement>) {\n    const selection = this.getSelection();\n    if (!selection) {\n      return this.props.onKeyDown && this.props.onKeyDown(event);\n    }\n    return this.onOptionSelected(selection, event);\n  }\n\n  private onEscape() {\n    this.setState({\n      selectionIndex: undefined,\n    });\n  }\n\n  private onTab(event: React.KeyboardEvent<HTMLInputElement>) {\n    const selection = this.getSelection();\n    let option = selection ?\n      selection : (this.state.searchResults.length > 0 ? this.state.searchResults[0] : null);\n\n    if (option === null && this.hasCustomValue()) {\n      option = this.getCustomValue();\n    }\n\n    if (option !== null) {\n      return this.onOptionSelected(option, event);\n    }\n  }\n\n  eventMap() {\n    const events: any = {};\n\n    events[KeyEvent.DOM_VK_UP] = this.navUp;\n    events[KeyEvent.DOM_VK_DOWN] = this.navDown;\n    events[KeyEvent.DOM_VK_RETURN] = events[KeyEvent.DOM_VK_ENTER] = this.onEnter;\n    events[KeyEvent.DOM_VK_ESCAPE] = this.onEscape;\n    events[KeyEvent.DOM_VK_TAB] = this.onTab;\n\n    return events;\n  }\n\n  private nav(delta: number) {\n    if (!this.hasHint()) {\n      return;\n    }\n    const { selectionIndex, searchResults } = this.state;\n    const { maxVisible } = this.props;\n    let newIndex = selectionIndex === undefined ? \n      (delta === 1 ? 0 : delta) : selectionIndex + delta;\n    let length = maxVisible ? searchResults.slice(0, maxVisible).length : searchResults.length;\n    if (this.hasCustomValue()) {\n      length += 1;\n    }\n\n    if (newIndex < 0) {\n      newIndex += length;\n    } else if (newIndex >= length) {\n      newIndex -= length;\n    }\n\n    this.setState({ selectionIndex: newIndex });\n  }\n\n  navDown() {\n    this.nav(1);\n  }\n\n  navUp() {\n    this.nav(-1);\n  }\n\n  private onChange(event: React.ChangeEvent<HTMLInputElement>) {\n    const { onChange } = this.props;\n    if (onChange) {\n      onChange(event);\n    }\n\n    this.onTextEntryUpdated();\n  }\n\n  private onKeyDown(event: React.KeyboardEvent<HTMLInputElement>) {\n    // If there are no visible elements, don't perform selector navigation.\n    // Just pass this up to the upstream onKeydown handler.\n    // Also skip if the user is pressing the shift key, \n    // since none of our handlers are looking for shift\n    if (!this.hasHint() || event.shiftKey) {\n      return this.props.onKeyDown && this.props.onKeyDown(event);\n    }\n\n    const handler = this.eventMap()[event.keyCode];\n\n    if (handler) {\n      handler(event);\n    } else {\n      return this.props.onKeyDown && this.props.onKeyDown(event);\n    }\n    // Don't propagate the keystroke back to the DOM/browser\n    event.preventDefault();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    const searchResults = this.getOptionsForValue(this.state.entryValue, nextProps.options);\n    const showResults = Boolean(searchResults.length) && this.state.isFocused;\n    this.setState({ searchResults, showResults });\n  }\n\n  render() {\n    const { customClasses: { input }, className } = { ...this.getDefaultProps(), ...this.props };\n    const inputClasses: any = {};\n    if (input) {\n      inputClasses[input] = true;\n    }\n    const inputClassList = classNames(inputClasses);\n\n    const classes: any = {\n      typeahead: this.props.defaultClassNames,\n    };\n    if (className) {\n      classes[className] = true;\n    }\n    const classList = classNames(classes);\n\n    return (\n      <div className={classList}>\n        {this.renderHiddenInput()}\n        <Input \n          innerRef={(c: HTMLInputElement) => {\n            this.inputElement = c;\n            this.props.innerRef && this.props.innerRef(c);\n          }}\n          type={this.props.textarea ? 'textarea' : 'text'}\n          disabled={this.props.disabled}\n          {...this.props.inputProps}\n          placeholder={this.props.placeholder}\n          className={inputClassList}\n          value={this.state.entryValue}\n          onChange={this.onChange}\n          onKeyDown={this.onKeyDown}\n          onKeyPress={this.props.onKeyPress}\n          onKeyUp={this.props.onKeyUp}\n          onFocus={this.onFocus}\n          onBlur={this.onBlur}\n        />\n        {this.state.showResults && this.renderIncrementalSearchResults()}\n      </div>\n    );\n  }\n\n  private onFocus(event: React.FocusEvent<HTMLInputElement>) {\n    this.setState({ isFocused: true, showResults: true }, () => {\n      this.onTextEntryUpdated();\n    });\n    if (this.props.onFocus) {\n      return this.props.onFocus(event);\n    }\n  }\n\n  private onBlur(event: React.FocusEvent<HTMLInputElement>) {\n    this.setState({ isFocused: false }, () => {\n      this.onTextEntryUpdated();\n    });\n    if (this.props.onBlur) {\n      return this.props.onBlur(event);\n    }\n  }\n\n  private renderHiddenInput() {\n    const { name } = this.props;\n    if (!name) {\n      return null;\n    }\n\n    return (\n      <input\n        type=\"hidden\"\n        name={name}\n        value={this.state.selection}\n      />\n    );\n  }\n\n  private generateSearchFunction() {\n    const { searchOptions, filterOption } = this.props;\n    if (typeof searchOptions === 'function') {\n      if (filterOption !== null) {\n        console.warn('searchOptions prop is being used, filterOption prop will be ignored');\n      }\n      return searchOptions;\n    } \n    \n    if (typeof filterOption === 'function') {\n      return (value: string, options: string[]) => {\n        return options.filter(o => filterOption(value, o));\n      };\n    }\n    \n    let mapper: (input: any) => string;\n    if (typeof filterOption === 'string') {\n      mapper = Accessor.generateAccessor(filterOption);\n    } else {\n      mapper = Accessor.IDENTITY_FN;\n    }\n    return (value: string, options: string[]) => {\n      const fuzzyOpt: FilterOptions<any> = { extract: mapper };\n      return fuzzy\n        .filter(value, options, fuzzyOpt)\n        .map((res: { index: number }) => options[res.index]);\n    };\n  }\n\n  private hasHint() {\n    return this.state.searchResults.length > 0 || this.hasCustomValue();\n  }\n}\n\nexport default Typeahead;\n","import * as React from 'react';\nimport classNames from 'classnames';\n\nexport interface Props {\n  className?: string;\n  name: string;\n  children: React.ReactNode | string;\n  object: string | object;\n  onRemove: Function;\n  value: string;\n  key?: string | number;\n}\n\n/**\n * Encapsulates the rendering of an option that has been \"selected\" in a\n * TypeaheadTokenizer\n */ \nclass Token extends React.Component<Props> {\n  \n  render() {\n    const className = classNames([\n      'typeahead-token',\n      this.props.className,\n    ]);\n\n    return (\n      <div className={className} key={this.props.key}>\n        {this.renderHiddenInput()}\n        {this.props.children}\n        {this.renderCloseButton()}\n      </div>\n    );\n  }\n\n  private renderHiddenInput() {\n    const { name, value, object } = this.props;\n    // If no name was set, don't create a hidden input\n    if (!name) {\n      return null;\n    }\n\n    const hiddenValue = value || object;\n    if (typeof hiddenValue !== 'string') {\n      throw new Error('Expected either string value or string object');\n    }\n    return (\n      <input\n        type=\"hidden\"\n        name={name + '[]'}\n        value={hiddenValue}\n      />\n    );\n  }\n\n  renderCloseButton() {\n    if (!this.props.onRemove) {\n      return '';\n    }\n\n    return (\n      <a\n        className={this.props.className || 'typeahead-token-close'} \n        href=\"#\" \n        onClick={(event: React.MouseEvent<HTMLAnchorElement>) => {\n          this.props.onRemove(this.props.object);\n          event.preventDefault();\n        }}\n      >\n        &#x00d7;\n      </a>);\n  }\n}\n\nexport default Token;\n","import * as React from 'react';\nimport Accessor from '../accessor';\nimport Token from './token';\nimport KeyEvent from '../keyevent';\nimport Typeahead from '../typeahead';\nimport classNames from 'classnames';\nimport { InputProps } from 'reactstrap';\nimport { TokenCustomClasses } from '../types';\n\nconst arraysAreDifferent = (array1: any[], array2: any[]): boolean => {\n  if (array1.length !== array2.length) {\n    return true;\n  }\n\n  for (let i = array2.length - 1; i >= 0; i -= 1) {\n    if (array2[i] !== array1[i]) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nexport interface Props extends InputProps {\n  name: string;\n  options: any[];\n  customClasses?: TokenCustomClasses;\n  allowCustomValues?: number;\n  defaultSelected: any[];\n  initialValue?: string;\n  placeholder?: string;\n  disabled?: boolean;\n  inputProps: object;\n  onTokenRemove?: Function;\n  onTokenAdd?: Function;\n  filterOption?: string | Function;\n  searchOptions?: Function;\n  displayOption?: string | ((arg: any) => string);\n  formInputOption?: string | ((arg: any) => string);\n  maxVisible?: number;\n  resultsTruncatedMessage?: string;\n  defaultClassNames?: boolean;\n  showOptionsWhenEmpty?: boolean;\n}\n\nexport interface State {\n  selected: string[];\n}\n\n/**\n * A typeahead that, when an option is selected, instead of simply filling\n * the text entry widget, prepends a renderable \"token\", that may be deleted\n * by pressing backspace on the beginning of the line with the keyboard.\n */\nclass TypeaheadTokenizer extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      // We need to copy this to avoid incorrect sharing\n      // of state across instances (e.g., via getDefaultProps())\n      selected: this.props.defaultSelected.slice(0),\n    };\n  }\n\n  getDefaultProps() {\n    const customClasses: TokenCustomClasses = {};\n    return {\n      customClasses,\n      allowCustomValues: 0,\n      disabled: false,\n      inputProps: {},\n      defaultClassNames: true,\n      displayOption: (token: any) => token,\n      showOptionsWhenEmpty: false,\n    };\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    // if we get new defaultProps, update selected\n    if (arraysAreDifferent(this.props.defaultSelected, nextProps.defaultSelected)) {\n      this.setState({ selected: nextProps.defaultSelected.slice(0) });\n    }\n  }\n\n  typeaheadElement?: HTMLInputElement;\n  focus() {\n    if (!this.typeaheadElement) throw new Error('No typeahead element');\n    this.typeaheadElement.focus();\n  }\n\n  getSelectedTokens() {\n    return this.state.selected;\n  }\n\n  // TODO: Support initialized tokens\n  //\n  private renderTokens() {\n    const { \n      customClasses: { token }, displayOption, formInputOption, name,\n    } = { ...this.getDefaultProps(), ...this.props };\n    const tokenClasses: any = {};\n    if (token) tokenClasses[token] = true;\n    const classList: string = classNames(tokenClasses);\n\n    const result = this.state.selected\n      .map((selected) => {\n        const displayString = Accessor.valueForOption(displayOption, selected);\n        const value = Accessor.valueForOption(formInputOption || displayOption, selected);\n        if (!displayString || !value) throw new Error('Expected string and value to exist');\n\n        const key: string = displayString;\n        return (\n          <Token \n            key={key} \n            className={classList}\n            onRemove={this.removeTokenForValue}\n            object={selected}\n            value={value}\n            name={name}\n          >\n            {displayString}\n          </Token>\n        );\n      });\n    return result;\n  }\n\n  private getOptionsForTypeahead() {\n    // return this.props.options without this.selected\n    return this.props.options;\n  }\n\n  private onKeyDown(event: React.KeyboardEvent<HTMLInputElement>) {\n    // We only care about intercepting backspaces\n    if (event.keyCode === KeyEvent.DOM_VK_BACK_SPACE) {\n      return this.handleBackspace(event);\n    }\n    this.props.onKeyDown && this.props.onKeyDown(event);\n  }\n\n  private handleBackspace(event: React.KeyboardEvent<HTMLInputElement>) {\n    // No tokens\n    if (!this.state.selected.length) {\n      return;\n    }\n\n    // Remove token ONLY when bksp pressed at beginning of line\n    // without a selection\n    if (!this.typeaheadElement) throw new Error('Expected typeahead element to exist');\n    if (this.typeaheadElement.selectionStart === this.typeaheadElement.selectionEnd &&\n        this.typeaheadElement.selectionStart === 0) {\n      this.removeTokenForValue(\n        this.state.selected[this.state.selected.length - 1]);\n      event.preventDefault();\n    }\n  }\n\n  private removeTokenForValue(value: string) {\n    const index = this.state.selected.indexOf(value);\n    if (index === -1) {\n      return;\n    }\n\n    this.state.selected.splice(index, 1);\n    this.setState({ selected: this.state.selected });\n    this.props.onTokenRemove && this.props.onTokenRemove(value);\n    return;\n  }\n\n  private addTokenForValue(value: string) {\n    let { selected } = this.state;\n    if (selected.indexOf(value) !== -1) {\n      return;\n    }\n    selected = [...selected, value];\n    this.setState({ selected });\n    \n    if (!this.typeaheadElement) throw new Error('Expected typahead to be set');\n\n    this.typeaheadElement.value = '';\n    this.props.onTokenAdd && this.props.onTokenAdd(value);\n  }\n\n  render() {\n    const { \n      className, customClasses = {}, disabled, inputProps,\n      allowCustomValues, initialValue = '',\n      maxVisible, resultsTruncatedMessage, placeholder,\n      onKeyPress, onKeyUp, onFocus, onBlur,\n      displayOption, defaultClassNames, filterOption, searchOptions,\n      showOptionsWhenEmpty,\n    } = { ...this.getDefaultProps(), ...this.props };\n    const classes: any = {};\n    const { typeahead } = customClasses;\n    if (typeahead) {\n      classes[typeahead] = true;\n    }\n    const classList:any = classNames(classes);\n    const tokenizerClasses: string[] = [];\n    if (defaultClassNames) {\n      tokenizerClasses.push('typeahead-tokenizer');\n    }\n    if (className) {\n      tokenizerClasses.push(className);\n    }\n    const tokenizerClassList = classNames(tokenizerClasses);\n\n    const args2Pass = {\n      placeholder,\n      disabled,\n      inputProps,\n      customClasses,\n      allowCustomValues,\n      initialValue,\n      maxVisible,\n      resultsTruncatedMessage,\n      onKeyPress,\n      onKeyUp,\n      onFocus,\n      onBlur,\n      displayOption,\n      defaultClassNames,\n      filterOption,\n      searchOptions,\n      showOptionsWhenEmpty,\n    };\n\n    return (\n      <div className={tokenizerClassList}>\n        {this.renderTokens()}\n        <Typeahead \n          innerRef={(c: HTMLInputElement) => this.typeaheadElement = c}\n          className={classList}\n          {...args2Pass}\n          options={this.getOptionsForTypeahead()}\n          onOptionSelected={this.addTokenForValue}\n          onKeyDown={this.onKeyDown}\n        />\n      </div>\n    );\n  }\n}\n\nexport default TypeaheadTokenizer;\n"],"names":["tslib_1.__extends","React.createElement","React.Component"],"mappings":"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"}