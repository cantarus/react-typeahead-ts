!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("tslib"),require("react")):"function"==typeof define&&define.amd?define(["exports","tslib","react"],t):t(e.FormikAdminTaskType={},e.tslib,e.React)}(this,function(e,t,n){"use strict";function o(e,t){return e(t={exports:{}},t.exports),t.exports}var s,r=o(function(e,t){var n;function o(e,t,o){if(!o||typeof o.value!==n.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+t+"> is not a method!");return{configurable:n.boolTrue,get:function(){var e=o.value.bind(this);return Object.defineProperty(this,t,{value:e,configurable:n.boolTrue,writable:n.boolTrue}),e}}}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.typeOfFunction="function",e.boolTrue=!0}(n||(n={})),t.bind=o,t.default=o}),i=(s=r)&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,a=function(){function e(){}return e.IDENTITY_FN=function(e){return e},e.generateAccessor=function(e){return function(t){return t[e]}},e.generateOptionToStringFor=function(t){return"string"==typeof t?e.generateAccessor(t):"function"==typeof t?t:function(e){return e}},e.valueForOption=function(e,t){if("string"==typeof t){if("object"!=typeof e)throw new Error("Invalid object type "+typeof e);return e[t]}if("function"==typeof t)return t(e);if("string"==typeof e)return e;throw new Error("Invalid object type "+typeof e)},e}(),p=o(function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=[],o=0;o<arguments.length;o++){var s=arguments[o];if(s){var r=typeof s;if("string"===r||"number"===r)e.push(s);else if(Array.isArray(s))e.push(n.apply(null,s));else if("object"===r)for(var i in s)t.call(s,i)&&s[i]&&e.push(i)}}return e.join(" ")}e.exports?e.exports=n:window.classNames=n}()}),u=function(e){function o(t){var n=e.call(this,t)||this;return n.onClick=n.onClick.bind(n),n}return t.__extends(o,e),o.prototype.getProps=function(){return t.__assign({customClasses:{hover:"hover"},onClick:function(e){e.preventDefault()},hover:!1},this.props)},o.prototype.render=function(){var e=this.getProps(),t=e.customClasses,o=e.children,s=e.customValue,r={},i=t.listItem,a=t.hover,u=t.customAdd;r[void 0===a?"hover":a]=Boolean(e.hover),i&&(r[i]=Boolean(i)),s&&u&&(r[u]=Boolean(u));var l=p(r);return n.createElement("li",{className:l,onClick:this.onClick,onMouseDown:this.onClick},n.createElement("a",{href:"javascript: void 0;",className:this.getClasses()},o))},o.prototype.getClasses=function(){var e={"typeahead-option":!0},t=this.getProps().customClasses.listAnchor;return t&&(e[t]=!0),p(e)},o.prototype.onClick=function(e){return e.preventDefault(),this.props.onClick(e)},o}(n.Component),l=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(o,e),o.prototype.getProps=function(){return t.__assign({customClasses:{},allowCustomValues:0,onOptionSelected:function(){},defaultClassNames:!0},this.props)},o.prototype.render=function(){var e=this,t=this.getProps(),o=t.options,s=t.customClasses,r=t.customValue,i=t.displayOption,a=t.defaultClassNames,l=t.selectionIndex,c=t.areResultsTruncated,h=t.resultsTruncatedMessage;if(!o.length&&t.allowCustomValues<=0)return!1;var d={"typeahead-selector":a},f=s.results;f&&(d[f]=!0);var y,m=p(d),v=0;r&&(v+=1,y=n.createElement(u,{key:r,hover:0===l,customClasses:s,customValue:r,onClick:this.onClick.bind(this,r)},r));var g=o.map(function(t,o){var r=i(t,o);return n.createElement(u,{key:r+"_"+o,hover:l===o+v,customClasses:s,onClick:e.onClick.bind(e,t)},r)});if(c&&h){var _={"results-truncated":!0},O=s.resultsTruncated;O&&(_[O]=!0);var E=p(_);g.push(n.createElement("li",{key:"results-truncated",className:E},this.props.resultsTruncatedMessage))}return n.createElement("ul",{className:m},y,g)},o.prototype.onClick=function(e,t){var n=this.props.onOptionSelected;if(n)return n(e,t)},o}(n.Component),c=c||{};c.DOM_VK_UP=c.DOM_VK_UP||38,c.DOM_VK_DOWN=c.DOM_VK_DOWN||40,c.DOM_VK_BACK_SPACE=c.DOM_VK_BACK_SPACE||8,c.DOM_VK_RETURN=c.DOM_VK_RETURN||13,c.DOM_VK_ENTER=c.DOM_VK_ENTER||14,c.DOM_VK_ESCAPE=c.DOM_VK_ESCAPE||27,c.DOM_VK_TAB=c.DOM_VK_TAB||9;var h=o(function(e,t){var n;e.exports=n={},n.simpleFilter=function(e,t){return t.filter(function(t){return n.test(e,t)})},n.test=function(e,t){return null!==n.match(e,t)},n.match=function(e,t,n){var o,s=0,r=[],i=t.length,a=0,p=0,u=(n=n||{}).pre||"",l=n.post||"",c=n.caseSensitive&&t||t.toLowerCase();e=n.caseSensitive&&e||e.toLowerCase();for(var h=0;h<i;h++)o=t[h],c[h]===e[s]?(o=u+o+l,s+=1,p+=1+p):p=0,a+=p,r[r.length]=o;return s===e.length?(a=c===e?Infinity:a,{rendered:r.join(""),score:a}):null},n.filter=function(e,t,o){return t&&0!==t.length?"string"!=typeof e?t:(o=o||{},t.reduce(function(t,s,r,i){var a=s;o.extract&&(a=o.extract(s));var p=n.match(e,a,o);return null!=p&&(t[t.length]={string:p.rendered,score:p.score,index:r,original:s}),t},[]).sort(function(e,t){var n=t.score-e.score;return n||e.index-t.index})):[]}}),d=function(e){function o(t){var n=e.call(this,t)||this;return n.state={searchResults:n.getOptionsForValue(t.initialValue,t.options),entryValue:t.value||"",selection:t.value,selectionIndex:void 0,isFocused:!1,showResults:!1},n}return t.__extends(o,e),o.prototype.getProps=function(){return t.__assign({customClasses:{},allowCustomValues:0,initialValue:"",value:"",disabled:!1,textarea:!1,customListComponent:l,showOptionsWhenEmpty:!1},this.props)},o.prototype.shouldSkipSearch=function(e){var t=!e||0===e.trim().length;return!(this.props.showOptionsWhenEmpty&&(this.state&&this.state.isFocused))&&t},o.prototype.getOptionsForValue=function(e,t){return this.shouldSkipSearch(e)?[]:this.generateSearchFunction()(e||"",t||this.getProps().options)},o.prototype.setEntryText=function(e){this.inputElement&&(this.inputElement.value=e,this.onTextEntryUpdated())},o.prototype.focus=function(){this.inputElement&&this.inputElement.focus()},o.prototype.hasCustomValue=function(){var e=this.getProps().allowCustomValues,t=this.state,n=t.searchResults;if(!e||e>0||t.entryValue.length>=e)return!1;var o=this.getInputOptionToStringMapper();return n.map(o).indexOf(this.state.entryValue)<0},o.prototype.getCustomValue=function(){if(this.hasCustomValue())return this.state.entryValue},o.prototype.renderIncrementalSearchResults=function(){var e=this.state,o=e.entryValue,s=e.selection,r=e.searchResults,i=e.selectionIndex,p=this.getProps(),u=p.maxVisible,c=p.resultsTruncatedMessage,h=p.displayOption,d=p.allowCustomValues,f=p.customClasses,y=p.defaultClassNames;if(this.shouldSkipSearch(o))return"";if(s)return"";var m=Boolean(u&&r.length>u);return n.createElement(l,t.__assign({options:u?r.slice(0,u):r,areResultsTruncated:m,onOptionSelected:this.onOptionSelected,customValue:this.getCustomValue(),displayOption:a.generateOptionToStringFor(h)},{allowCustomValues:d,resultsTruncatedMessage:c,customClasses:f,selectionIndex:i,defaultClassNames:y}))},o.prototype.getSelection=function(){var e=this.state.selectionIndex;if(void 0!==e){if(this.hasCustomValue()){if(0===e)return this.state.entryValue;e-=1}return this.state.searchResults[e]}},o.prototype.getInputOptionToStringMapper=function(){if(this.inputMapper)return this.inputMapper;var e=this.getProps();return this.inputMapper=a.generateOptionToStringFor(e.formInputOption||e.inputDisplayOption||e.displayOption),this.inputMapper},o.prototype.getDisplayOptionToStringMapper=function(){if(this.displayMapper)return this.displayMapper;var e=this.getProps();return this.displayMapper=a.generateOptionToStringFor(e.inputDisplayOption||e.displayOption),this.displayMapper},o.prototype.onOptionSelected=function(e,t){if(!this.inputElement)throw new Error("No input element");var n,o;(this.inputElement.focus(),"string"==typeof e)?(n=e,o=e):(n=this.getDisplayOptionToStringMapper()(e,0),o=this.getInputOptionToStringMapper()(e));return this.inputElement.value=n,this.setState({searchResults:this.getOptionsForValue(n),selection:o,entryValue:n,showResults:!1}),this.props.onOptionSelected&&this.props.onOptionSelected(e,t)},o.prototype.onTextEntryUpdated=function(e){if(!this.inputElement)throw new Error("No input element");var t=void 0===e?this.inputElement.value:e;this.setState({searchResults:this.getOptionsForValue(t),selection:"",entryValue:t})},o.prototype.onEnter=function(e){var t=this.getSelection();return t?this.onOptionSelected(t,e):this.props.onKeyDown&&this.props.onKeyDown(e)},o.prototype.onEscape=function(){this.setState({selectionIndex:void 0})},o.prototype.onTab=function(e){var t=this.getSelection(),n=t||(this.state.searchResults.length>0?this.state.searchResults[0]:void 0);if(void 0===n&&this.hasCustomValue()&&(n=this.getCustomValue()),void 0!==n)return this.onOptionSelected(n,e)},o.prototype.eventMap=function(){var e={};return e[c.DOM_VK_UP]=this.navUp,e[c.DOM_VK_DOWN]=this.navDown,e[c.DOM_VK_RETURN]=e[c.DOM_VK_ENTER]=this.onEnter,e[c.DOM_VK_ESCAPE]=this.onEscape,e[c.DOM_VK_TAB]=this.onTab,e},o.prototype.nav=function(e){if(this.hasHint()){var t=this.state,n=t.selectionIndex,o=t.searchResults,s=this.getProps().maxVisible,r=void 0===n?1===e?0:e:n+e,i=s?o.slice(0,s).length:o.length;this.hasCustomValue()&&(i+=1),r<0?r+=i:r>=i&&(r-=i),this.setState({selectionIndex:r})}},o.prototype.navDown=function(){this.nav(1)},o.prototype.navUp=function(){this.nav(-1)},o.prototype.onChange=function(e){var t=this.getProps().onChange;t&&t(e),this.onTextEntryUpdated(e.target.value)},o.prototype.onKeyDown=function(e){if(!this.hasHint()||e.shiftKey)return this.props.onKeyDown&&this.props.onKeyDown(e);var t=this.eventMap()[e.keyCode];if(!t)return this.props.onKeyDown&&this.props.onKeyDown(e);t(e),e.preventDefault()},o.prototype.componentWillReceiveProps=function(e){var t=this.getOptionsForValue(this.state.entryValue,e.options),n=Boolean(t.length)&&this.state.isFocused;this.setState({searchResults:t,showResults:n})},o.prototype.render=function(){var e=this,o=this.getProps(),s=o.customClasses.input,r=o.className,i={};s&&(i[s]=!0);var a=p(i),u={typeahead:this.props.defaultClassNames};r&&(u[r]=!0);var l=p(u);return n.createElement("div",{className:l},this.renderHiddenInput(),n.createElement("input",t.__assign({ref:function(t){e.inputElement=t,e.props.innerRef&&e.props.innerRef(t)},type:this.props.textarea?"textarea":"text",disabled:this.props.disabled},this.props.inputProps,{placeholder:this.props.placeholder,className:a,value:this.state.entryValue,onChange:this.onChange,onKeyDown:this.onKeyDown,onKeyPress:this.props.onKeyPress,onKeyUp:this.props.onKeyUp,onFocus:this.onFocus,onBlur:this.onBlur})),this.state.showResults&&this.renderIncrementalSearchResults())},o.prototype.onFocus=function(e){var t=this;this.setState({isFocused:!0,showResults:!0},function(){t.onTextEntryUpdated()}),this.props.onFocus&&this.props.onFocus(e)},o.prototype.onBlur=function(e){var t=this;this.setState({isFocused:!1},function(){t.onTextEntryUpdated()}),this.props.onBlur&&this.props.onBlur(e)},o.prototype.renderHiddenInput=function(){var e=this.getProps().name;return e?n.createElement("input",{type:"hidden",name:e,value:this.state.selection}):null},o.prototype.generateSearchFunction=function(){if(this.searchFunction)return this.searchFunction;var e=this.getProps(),t=e.searchOptions,n=e.filterOption;if("function"==typeof t)void 0!==n&&console.warn("searchOptions prop is being used, filterOption prop will be ignored"),this.searchFunction=t;else if("function"==typeof n)this.searchFunction=function(e,t){return t.filter(function(t){return n(e,t)}).map(function(e){return e})};else{var o;o="string"==typeof n?a.generateAccessor(n):a.IDENTITY_FN,this.searchFunction=function(e,t){return h.filter(e,t,{extract:o}).map(function(e){return t[e.index]})}}return this.searchFunction},o.prototype.hasHint=function(){return this.state.searchResults.length>0||this.hasCustomValue()},t.__decorate([i],o.prototype,"focus",null),t.__decorate([i],o.prototype,"onOptionSelected",null),t.__decorate([i],o.prototype,"onTextEntryUpdated",null),t.__decorate([i],o.prototype,"onEnter",null),t.__decorate([i],o.prototype,"onEscape",null),t.__decorate([i],o.prototype,"onTab",null),t.__decorate([i],o.prototype,"navDown",null),t.__decorate([i],o.prototype,"navUp",null),t.__decorate([i],o.prototype,"onChange",null),t.__decorate([i],o.prototype,"onKeyDown",null),t.__decorate([i],o.prototype,"onFocus",null),t.__decorate([i],o.prototype,"onBlur",null),o}(n.Component),f=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(o,e),o.prototype.render=function(){var e=p(["typeahead-token",this.props.className]);return n.createElement("div",{className:e,key:this.props.key},this.renderHiddenInput(),this.props.children,this.renderCloseButton())},o.prototype.renderHiddenInput=function(){var e=this.props,t=e.name,o=e.value,s=e.object;if(!t)return null;var r=o||s;if("string"!=typeof r)throw new Error("Expected either string value or string object");return n.createElement("input",{type:"hidden",name:t+"[]",value:r})},o.prototype.renderCloseButton=function(){var e=this;return this.props.onRemove?n.createElement("a",{className:this.props.className||"typeahead-token-close",href:"#",onClick:function(t){e.props.onRemove(e.props.object),t.preventDefault()}},"×"):""},o}(n.Component),y=function(e){function o(t){var n=e.call(this,t)||this,o=t.defaultSelected;return n.state={selected:(void 0===o?[]:o).slice(0)},n}return t.__extends(o,e),o.prototype.getProps=function(){return t.__assign({customClasses:{},allowCustomValues:0,disabled:!1,inputProps:{},defaultClassNames:!0,showOptionsWhenEmpty:!1},this.props)},o.prototype.getInputOptionToStringMapper=function(){if(this.inputMapper)return this.inputMapper;var e=this.getProps();return this.inputMapper=a.generateOptionToStringFor(e.formInputOption||e.displayOption),this.inputMapper},o.prototype.componentWillReceiveProps=function(e){(function(e,t){if(e.length!==t.length)return!0;for(var n=t.length-1;n>=0;n-=1)if(t[n]!==e[n])return!0;return!1})(this.props.defaultSelected,e.defaultSelected)&&this.setState({selected:e.defaultSelected.slice(0)})},o.prototype.focus=function(){if(!this.typeaheadElement)throw new Error("No typeahead element");this.typeaheadElement.focus()},o.prototype.getSelectedTokens=function(){return this.state.selected},o.prototype.renderTokens=function(){var e=this,t=this.getProps(),o=t.customClasses.token,s=t.displayOption,r=t.formInputOption,i=t.name,u={};o&&(u[o]=!0);var l=p(u);return this.state.selected.map(function(t){var o=a.valueForOption(t,s),p=a.valueForOption(t,r||s);if(!o||!p)throw new Error("Expected string and value to exist");return n.createElement(f,{key:o,className:l,onRemove:e.removeTokenForValue,object:t,value:p,name:i},o)})},o.prototype.getOptionsForTypeahead=function(){return this.props.options},o.prototype.onKeyDown=function(e){if(e.keyCode===c.DOM_VK_BACK_SPACE)return this.handleBackspace(e);this.props.onKeyDown&&this.props.onKeyDown(e)},o.prototype.handleBackspace=function(e){if(this.state.selected.length){if(!this.typeaheadElement)throw new Error("Expected typeahead element to exist");this.typeaheadElement.selectionStart===this.typeaheadElement.selectionEnd&&0===this.typeaheadElement.selectionStart&&(this.removeTokenForValue(this.state.selected[this.state.selected.length-1]),e.preventDefault())}},o.prototype.getSelectedIndex=function(e){var t=this.getInputOptionToStringMapper(),n=t(e);return this.state.selected.map(t).indexOf(n)},o.prototype.removeTokenForValue=function(e){var t=this.getSelectedIndex(e);-1!==t&&(this.state.selected.splice(t,1),this.setState({selected:this.state.selected}),this.props.onTokenRemove&&this.props.onTokenRemove(e))},o.prototype.addTokenForValue=function(e){var t=this.state.selected;if(-1===this.getSelectedIndex(e)){if(t=t.concat([e]),this.setState({selected:t}),!this.typeaheadElement)throw new Error("Expected typahead to be set");this.typeaheadElement.value="",this.props.onTokenAdd&&this.props.onTokenAdd(e)}},o.prototype.render=function(){var e=this,o=this.getProps(),s=o.className,r=o.customClasses,i=void 0===r?{}:r,a=o.disabled,u=o.inputProps,l=o.allowCustomValues,c=o.initialValue,h=void 0===c?"":c,f=o.maxVisible,y=o.resultsTruncatedMessage,m=o.placeholder,v=o.onKeyPress,g=o.onKeyUp,_=o.onFocus,O=o.onBlur,E=o.showOptionsWhenEmpty,C=o.displayOption,V=o.defaultClassNames,w=o.filterOption,T=o.searchOptions,S={},x=i.typeahead;x&&(S[x]=!0);var D=p(S),M=[];V&&M.push("typeahead-tokenizer"),s&&M.push(s);var K=p(M),F={placeholder:m,disabled:a,inputProps:u,customClasses:i,allowCustomValues:l,initialValue:h,maxVisible:f,resultsTruncatedMessage:y,onKeyPress:v,onKeyUp:g,onFocus:_,onBlur:O,displayOption:C,defaultClassNames:V,filterOption:w,searchOptions:T,showOptionsWhenEmpty:E};return n.createElement("div",{className:K},this.renderTokens(),n.createElement(d,t.__assign({innerRef:function(t){return e.typeaheadElement=t},className:D},F,{options:this.getOptionsForTypeahead(),onOptionSelected:this.addTokenForValue,onKeyDown:this.onKeyDown})))},t.__decorate([i],o.prototype,"onKeyDown",null),t.__decorate([i],o.prototype,"addTokenForValue",null),o}(n.Component);e.Typeahead=d,e.Tokenizer=y,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=typeahead.umd.min.js.map
